{"version":3,"sources":["config.js","lib/hash.js","components/Chart/Axes.js","components/Chart/Line.js","components/Chart/index.js","pages/common/LineChart/index.js","hooks/scales.js","pages/Home/index.js","lib/weightData.js","hooks/window.js","App.js","serviceWorker.js","index.js"],"names":["config","endpoint","hash","values","reduce","a","c","useTranslate","pos","_useState","useState","_useState2","Object","slicedToArray","translate","setTranslate","useEffect","apply","concat","toConsumableArray","useElem","_ref","axisFn","scale","ticks","range","tickFormat","elem","useRef","axis","select","current","call","domain","AxisBottom","_ref2","chart","gridlines","className","plotHeight","plotWidth","axisEl","axisBottom","react_default","createElement","lib","transform","map","tick","key","x1","x2","y1","y2","ref","AxisLeft","_ref3","axisLeft","Line","x","y","data","_ref$accessor","accessor","d","_ref$animate","animate","l","d3line","clipPath","clipPathId","plots","plot","Fragment","stroke","color","node","i","cx","cy","fill","animationProgress","layout_lib","nodeEnter","n","objectSpread","nodes","Chart","height","width","_ref$marginTop","marginTop","_ref$marginRight","marginRight","_ref$marginBottom","marginBottom","_ref$marginLeft","marginLeft","children","chartProps","id","React","Children","child","cloneElement","padExtent","array","factor","LineChart","_ref$title","title","_ref$dataAccessor","dataAccessor","_ref$yAccessor","yAccessor","_ref$xAccessor","xAccessor","_ref$domainY","domainY","_ref$domainX","domainX","scaleX","scaleTime","useTimeScale","extent","scaleY","scaleLinear","useLinearScale","components_Chart","Axes_AxisBottom","Axes_AxisLeft","Line_Line","Date","parse","datetime","weight","Home","allData","_ref$includeHistory","includeHistory","setData","url","URL","searchParams","append","fetch","method","headers","Content-Type","mode","then","res","json","payload","useWeightData","_useWindowDimensions","window","innerWidth","innerHeight","dimensions","setDimensions","addEventListener","debounce","useWindowDimensions","ids","console","log","schemeSet1","lineColors","_ref3$domain","_ref3$range","scaleOrdinal","length","useOrdinalScale","graphData","ratio","LineChart_LineChart","App","pages_Home","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.23c54019.chunk.js","sourcesContent":["const dev = {\n  endpoint: 'https://mvpreedxy0.execute-api.eu-central-1.amazonaws.com/dev/'\n}\n\nconst prod = {\n  endpoint: 'https://mvpreedxy0.execute-api.eu-central-1.amazonaws.com/dev/'\n}\n\nconst config = process.env.NODE_ENV === 'development' ? dev : prod;\n\nexport { config }\n","export const hash = values => values.reduce((a,c) => a+c, '');\n","import React, { useRef, useEffect, useState } from 'react'\nimport { Group, Line } from '@potion/element'\nimport { axisBottom, axisLeft } from 'd3-axis'\nimport { select } from 'd3-selection'\nimport 'd3-transition' \nconst useTranslate = (pos) => {\n  const [ translate, setTranslate ] = useState(pos);\n  useEffect(() => {\n    setTranslate(pos)\n  }, ...pos)\n\n  return translate\n}\n\nconst useElem = ({axisFn, scale, range, ticks, tickFormat}) => {\n  const elem = useRef(null);\n\n  useEffect(() => {\n    const axis = axisFn()\n      .scale(scale);\n    if (ticks) axis.ticks(ticks)\n    if (tickFormat) axis.tickFormat(tickFormat);\n\n    select(elem.current)\n      .call(axis);\n  },[\n    ...scale.domain(),\n    ...scale.range(),\n  ]);\n\n  return elem\n}\n\nconst AxisBottom = ({\n  chart,\n  scale,\n  gridlines,\n  className,\n  ticks,\n  tickFormat\n}) => {\n  const translate = useTranslate([0, chart.plotHeight]);\n\n  scale.range([0, chart.plotWidth]);\n\n  const axisEl = useElem({\n    axisFn: axisBottom,\n    scale,\n    ticks,\n    tickFormat\n  })\n\n  return (\n    <Group transform={{translate}} className={className}>\n      {gridlines && scale.ticks().map(tick => (\n        <Line key={tick} x1={scale(tick)+0.5} x2={scale(tick)+0.5} y1={-chart.plotHeight} y2={0} className=\"gridline\" />\n      ))}\n      <g ref={axisEl}></g>\n    </Group>\n  )\n}\n\nconst AxisLeft = ({\n  chart,\n  scale,\n  gridlines,\n  className,\n  ticks,\n  tickFormat\n}) => {\n  const translate = useTranslate([0,0]);\n\n  scale.range([chart.plotHeight, 0]);\n\n  const axisEl = useElem({\n    axisFn: axisLeft,\n    scale,\n    ticks,\n    tickFormat\n  })\n\n  return (\n    <Group transform={{translate}} className={className}>\n      {gridlines && scale.ticks().map(tick => (\n        <Line key={tick} x1={0} x2={chart.plotWidth} y1={scale(tick)+0.5} y2={scale(tick)+0.5} className=\"gridline\"/>\n      ))}\n      <g ref={axisEl}></g>\n    </Group>\n  )\n}\n\nexport {\n  AxisBottom,\n  AxisLeft\n}\n","import React from 'react';\nimport { Collection } from '@potion/layout'\nimport { Group, Circle } from '@potion/element'\nimport { line as d3line } from 'd3-shape'\n\nconst Line = ({x, y, data, chart, accessor = d => d.data, animate = false}) => {\n\n  const l = d3line()\n    .x(x)\n    .y(y);\n\n  const clipPath = `url(#${chart.clipPathId})`;\n\n  const plots = data.map(d => ({\n    key: d.key,\n    plot: (\n      <>\n        <path\n          d={l(accessor(d))}\n          clipPath={clipPath}\n          className=\"line\"\n          stroke={d.color || 'black'}\n        />\n        {accessor(d).map((node, i) => (\n          <Circle\n            key={i}\n            cx={x(node)}\n            cy={y(node)}\n            clipPath={clipPath}\n            fill={d.color}\n            className=\"point\"\n          />\n        ))}\n      </>\n    ),\n    animationProgress: 1\n  }))\n\n  return (\n    <Collection\n      data={plots}\n      nodeEnter={n => ({...n, animationProgress: 0})}\n      animate={animate}\n    >\n      {nodes => nodes.map(({key, plot, animationProgress}) => (\n        <Group\n          key={key}\n          transform={{translate: [0, chart.plotHeight*(1-animationProgress)]}}\n        >\n          {plot}\n        </Group>\n      ))}\n    </Collection>\n  )\n}\n\nexport {\n  Line\n}\n","import React from 'react'\nimport { Svg, Group, Rect } from '@potion/element'\n\nconst Chart = ({\n  height,\n  width,\n  marginTop = 20,\n  marginRight = 20,\n  marginBottom = 20,\n  marginLeft = 20,\n  children\n}) => {\n  const chartProps = {\n    height,\n    width,\n    marginTop,\n    marginRight,\n    marginBottom,\n    marginLeft,\n    plotHeight: height - marginTop - marginBottom,\n    plotWidth: width - marginLeft - marginRight,\n    clipPathId: \"plotArea\"\n  }\n  return (\n    <Svg height={height} width={width}>\n      <Group transform={{translate: [marginLeft, marginTop ]}}>\n        <clipPath id={chartProps.clipPathId}>\n          <Rect width={chartProps.plotWidth} height={chartProps.plotHeight} />\n        </clipPath>\n        {React.Children.map(\n          children,\n          child => React.cloneElement(child, {chart:chartProps})\n        )}\n      </Group>\n    </Svg>\n  )\n}\n\nexport default Chart\nexport { AxisBottom, AxisLeft } from './Axes'\nexport { Line } from './Line'\n","import React from 'react';\nimport Chart, { Line, AxisBottom, AxisLeft } from '../../../components/Chart'\nimport { useTimeScale, useLinearScale } from '../../../hooks'\nimport { extent } from 'd3-array';\nimport { Text } from '@potion/element'\n\nconst padExtent = (array, factor) => {\n  const range = array[1]-array[0];\n  return [ array[0] - range*factor, array[1] + range*factor ];\n}\n\nconst LineChart = ({\n  height,\n  width,\n  data,\n  title = '',\n  dataAccessor = d => d.data,\n  yAccessor = d => d,\n  xAccessor = d => d,\n  domainY = 'auto',\n  domainX = 'auto',\n  children\n}) => {\n\n  const scaleX = useTimeScale({\n    domain: domainX === 'auto'\n      ? extent(data.reduce((a, c) => a.concat(dataAccessor(c)),[]), xAccessor)\n      : domainX\n  })\n\n  const scaleY = useLinearScale({\n    domain: padExtent(\n      domainY === 'auto'\n        ? extent(data.reduce((a, c) => a.concat(dataAccessor(c)),[]), yAccessor)\n        : domainY,\n      0.05\n    )\n  })\n\n  return (\n    <Chart\n      height={height}\n      width={width}\n      marginLeft={50}\n      marginRight={30}\n    >\n      <Text>{title}</Text>\n      <AxisBottom\n        scale={scaleX}\n        gridlines\n      />\n      <AxisLeft\n        scale={scaleY}\n        gridlines\n      />\n      <Line\n        x={d => scaleX(Date.parse(d.datetime))}\n        y={d => scaleY(+d.weight)}\n        data={data}\n        animate\n      />\n    </Chart>\n  );\n}\n\nexport { LineChart };\n","import { useEffect } from 'react';\nimport { scaleTime, scaleLinear, scaleOrdinal } from 'd3-scale';\nimport { hash } from '../lib'\n\nconst useTimeScale = ({domain}) => {\n  const scale = scaleTime()\n    .domain(domain)\n\n  useEffect(() => {\n    scale\n      .domain(domain)\n  }, [ ...domain ]);\n\n  return scale;\n}\n\nconst useLinearScale = ({domain}) => {\n  const scale = scaleLinear()\n    .domain(domain)\n\n  useEffect(() => {\n    scale\n      .domain(domain)\n  }, [ ...domain ]);\n\n  return scale;\n}\n\nconst useOrdinalScale = ({domain = [], range = []}) => {\n  const scale = scaleOrdinal()\n  if (domain.length) scale.domain(domain)\n  if (range.length) scale.range(range)\n\n  useEffect(() => {\n    if (domain.length) scale.domain(domain)\n    if (range.length) scale.range(range)\n  }, [ hash(domain), hash(range) ])\n\n  return scale\n}\n\nexport {\n  useTimeScale,\n  useLinearScale,\n  useOrdinalScale\n}\n","import React from 'react'\nimport { schemeSet1 } from 'd3-scale-chromatic'\n\nimport { useWeightData } from '../../lib'\nimport { LineChart } from '../common'\nimport { useWindowDimensions, useOrdinalScale } from '../../hooks'\n\n\nimport './Home.css'\n\nconst Home = () => {\n  const allData = useWeightData({includeHistory: true});\n\n  const [ width ] = useWindowDimensions();\n\n  const ids = allData.map(d => d.id);\n  console.log(ids, schemeSet1);\n  const lineColors = useOrdinalScale({domain: ids, range: schemeSet1 })\n\n  const graphData = allData.map(d => ({ ...d, key: d.id, color: lineColors(d.id), ratio: 1 }))\n  console.log(graphData);\n\n  const yAccessor = d => +d.weight;\n  const xAccessor = d => Date.parse(d.datetime);\n\n  return (\n    <>\n      <LineChart\n        data={graphData}\n        width={width}\n        height={400}\n        yAccessor={yAccessor}\n        xAccessor={xAccessor}\n      />\n      {graphData.map(d => (\n        <LineChart\n          key={d.id}\n          data={[d]}\n          width={width}\n          height={400}\n          yAccessor={d => +d.weight}\n          xAccessor={d => Date.parse(d.datetime)}\n        />\n      ))}\n    </>\n  )\n}\n\nexport default Home;\n","import { useState, useEffect } from 'react';\nimport { config } from '../config';\n\nconst useWeightData = ({includeHistory = true}) => {\n  \n  const [ data, setData ] = useState([]);\n\n  useEffect(() => {\n    const url = new URL('users', config.endpoint);\n    if (includeHistory) url.searchParams.append('includeHistory', includeHistory);\n    fetch(\n      url,\n      {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        mode: 'cors'\n      }\n    )\n      .then(res => res.json())\n      .then(res => setData(Object.values(res.payload)));\n  }, [includeHistory]);\n\n  return data;\n}\n\nexport { useWeightData }\n","import { useState, useEffect } from 'react';\nimport debounce from 'debounce'\n\nconst useWindowDimensions = () => {\n  const [dimensions, setDimensions] = useState([ window.innerWidth, window.innerHeight]);\n\n  useEffect(() => {\n    window.addEventListener('resize', debounce(() => {\n      setDimensions([window.innerWidth, window.innerHeight]);\n    }, 500));\n  }, [])\n\n  return dimensions;\n}\n\nexport { useWindowDimensions };\n","import React from 'react';\n\nimport { Home } from './pages';\n\nconst App = () => (\n  <Home />\n)\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}