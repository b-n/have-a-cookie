{"version":3,"sources":["config.js","lib/hash.js","components/Chart/Axes.js","components/Chart/Line.js","components/Chart/index.js","pages/common/LineChart/index.js","hooks/scales.js","pages/Home/index.js","hooks/window.js","lib/weightData.js","App.js","serviceWorker.js","index.js"],"names":["config","endpoint","hash","values","reduce","a","c","useTranslate","pos","_useState","useState","_useState2","Object","slicedToArray","translate","setTranslate","useEffect","apply","concat","toConsumableArray","useElem","_ref","axisFn","scale","ticks","range","tickFormat","elem","useRef","axis","select","current","call","domain","AxisBottom","_ref2","chart","gridlines","className","plotHeight","plotWidth","axisEl","axisBottom","react_default","createElement","lib","transform","map","tick","key","x1","x2","y1","y2","ref","AxisLeft","_ref3","axisLeft","Line","x","y","data","_ref$accessor","accessor","d","_ref$animate","animate","l","d3line","curve","curveBundle","beta","clipPath","clipPathId","plots","plot","Fragment","stroke","color","node","i","cx","cy","fill","animationProgress","layout_lib","nodeEnter","n","objectSpread","nodes","Chart","height","width","_ref$marginTop","marginTop","_ref$marginRight","marginRight","_ref$marginBottom","marginBottom","_ref$marginLeft","marginLeft","children","chartProps","id","React","Children","child","cloneElement","padExtent","array","factor","LineChart","_ref$title","title","_ref$dataAccessor","dataAccessor","_ref$yAccessor","yAccessor","_ref$xAccessor","xAccessor","_ref$domainY","domainY","_ref$domainX","domainX","scaleX","scaleTime","useTimeScale","extent","scaleY","scaleLinear","useLinearScale","components_Chart","Axes_AxisBottom","Axes_AxisLeft","Line_Line","Container","styled","div","_templateObject","Home","_useWindowDimensions","window","innerWidth","innerHeight","dimensions","setDimensions","addEventListener","debounce","document","body","clientWidth","clientHeight","useWindowDimensions","lineColors","_ref3$domain","_ref3$range","scaleOrdinal","length","useOrdinalScale","schemeSet2","graphData","_ref$includeHistory","includeHistory","setData","url","URL","searchParams","append","fetch","method","headers","Content-Type","mode","then","res","json","payload","useWeightData","_d$initialReading","initialReading","weight","active","undefined","e","relative","datetime","Date","parse","formatDataForGraph","sort","b","LineChart_LineChart","filter","name","App","pages_Home","Boolean","location","hostname","match","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.aff782fa.chunk.js","sourcesContent":["const dev = {\n  endpoint: 'https://mvpreedxy0.execute-api.eu-central-1.amazonaws.com/dev/'\n}\n\nconst prod = {\n  endpoint: 'https://mvpreedxy0.execute-api.eu-central-1.amazonaws.com/dev/'\n}\n\nconst config = process.env.NODE_ENV === 'development' ? dev : prod;\n\nexport { config }\n","export const hash = values => values.reduce((a,c) => a+c, '');\n","import React, { useRef, useEffect, useState } from 'react'\nimport { Group, Line } from '@potion/element'\nimport { axisBottom, axisLeft } from 'd3-axis'\nimport { select } from 'd3-selection'\nimport 'd3-transition' \nconst useTranslate = (pos) => {\n  const [ translate, setTranslate ] = useState(pos);\n  useEffect(() => {\n    setTranslate(pos)\n  }, ...pos)\n\n  return translate\n}\n\nconst useElem = ({axisFn, scale, range, ticks, tickFormat}) => {\n  const elem = useRef(null);\n\n  useEffect(() => {\n    const axis = axisFn()\n      .scale(scale);\n    if (ticks) axis.ticks(ticks)\n    if (tickFormat) axis.tickFormat(tickFormat);\n\n    select(elem.current)\n      .call(axis);\n  },[\n    ...scale.domain(),\n    ...scale.range(),\n  ]);\n\n  return elem\n}\n\nconst AxisBottom = ({\n  chart,\n  scale,\n  gridlines,\n  className,\n  ticks,\n  tickFormat\n}) => {\n  const translate = useTranslate([0, chart.plotHeight]);\n\n  scale.range([0, chart.plotWidth]);\n\n  const axisEl = useElem({\n    axisFn: axisBottom,\n    scale,\n    ticks,\n    tickFormat\n  })\n\n  return (\n    <Group transform={{translate}} className={className}>\n      {gridlines && scale.ticks().map(tick => (\n        <Line key={tick} x1={scale(tick)+0.5} x2={scale(tick)+0.5} y1={-chart.plotHeight} y2={0} className=\"gridline\" />\n      ))}\n      <g ref={axisEl}></g>\n    </Group>\n  )\n}\n\nconst AxisLeft = ({\n  chart,\n  scale,\n  gridlines,\n  className,\n  ticks,\n  tickFormat\n}) => {\n  const translate = useTranslate([0,0]);\n\n  scale.range([chart.plotHeight, 0]);\n\n  const axisEl = useElem({\n    axisFn: axisLeft,\n    scale,\n    ticks,\n    tickFormat\n  })\n\n  return (\n    <Group transform={{translate}} className={className}>\n      {gridlines && scale.ticks().map(tick => (\n        <Line key={tick} x1={0} x2={chart.plotWidth} y1={scale(tick)+0.5} y2={scale(tick)+0.5} className=\"gridline\"/>\n      ))}\n      <g ref={axisEl}></g>\n    </Group>\n  )\n}\n\nexport {\n  AxisBottom,\n  AxisLeft\n}\n","import React from 'react';\nimport { Collection } from '@potion/layout'\nimport { Group, Circle } from '@potion/element'\nimport { line as d3line, curveBundle } from 'd3-shape'\n\nconst Line = ({x, y, data, chart, accessor = d => d.data, animate = false}) => {\n\n  const l = d3line()\n    .x(x)\n    .y(y)\n    .curve(curveBundle.beta(0.75));\n\n  const clipPath = `url(#${chart.clipPathId})`;\n\n  const plots = data.map(d => ({\n    key: d.key,\n    plot: (\n      <>\n        <path\n          d={l(accessor(d))}\n          clipPath={clipPath}\n          className=\"line\"\n          stroke={d.color || 'black'}\n        />\n        {accessor(d).map((node, i) => (\n          <Circle\n            key={i}\n            cx={x(node)}\n            cy={y(node)}\n            clipPath={clipPath}\n            fill={d.color}\n            className=\"point\"\n          />\n        ))}\n      </>\n    ),\n    animationProgress: 1\n  }))\n\n  return (\n    <Collection\n      data={plots}\n      nodeEnter={n => ({...n, animationProgress: 0})}\n      animate={animate}\n    >\n      {nodes => nodes.map(({key, plot, animationProgress}) => (\n        <Group\n          key={key}\n          transform={{translate: [0, chart.plotHeight*(1-animationProgress)]}}\n        >\n          {plot}\n        </Group>\n      ))}\n    </Collection>\n  )\n}\n\nexport {\n  Line\n}\n","import React from 'react'\nimport { Svg, Group, Rect } from '@potion/element'\n\nconst Chart = ({\n  height,\n  width,\n  marginTop = 20,\n  marginRight = 20,\n  marginBottom = 20,\n  marginLeft = 20,\n  children,\n  className\n}) => {\n  const chartProps = {\n    height,\n    width,\n    marginTop,\n    marginRight,\n    marginBottom,\n    marginLeft,\n    plotHeight: height - marginTop - marginBottom,\n    plotWidth: width - marginLeft - marginRight,\n    clipPathId: \"plotArea\",\n  }\n  return (\n    <Svg height={height} width={width} className={className}>\n      <Group transform={{translate: [marginLeft, marginTop ]}}>\n        <clipPath id={chartProps.clipPathId}>\n          <Rect width={chartProps.plotWidth} height={chartProps.plotHeight} />\n        </clipPath>\n        {React.Children.map(\n          children,\n          child => React.cloneElement(child, {chart:chartProps})\n        )}\n      </Group>\n    </Svg>\n  )\n}\n\nexport default Chart\nexport { AxisBottom, AxisLeft } from './Axes'\nexport { Line } from './Line'\n","import React from 'react';\nimport Chart, { Line, AxisBottom, AxisLeft } from '../../../components/Chart'\nimport { useTimeScale, useLinearScale } from '../../../hooks'\nimport { extent } from 'd3-array';\nimport { Text } from '@potion/element'\n\nconst padExtent = (array, factor) => {\n  const range = array[1]-array[0];\n  return [ array[0] - range*factor, array[1] + range*factor ];\n}\n\nconst LineChart = ({\n  height,\n  width,\n  data,\n  title = '',\n  dataAccessor = d => d.data,\n  yAccessor = d => d,\n  xAccessor = d => d,\n  domainY = 'auto',\n  domainX = 'auto',\n  children,\n  className\n}) => {\n\n  const scaleX = useTimeScale({\n    domain: domainX === 'auto'\n      ? extent(data.reduce((a, c) => a.concat(dataAccessor(c)),[]), xAccessor)\n      : domainX\n  })\n\n  const scaleY = useLinearScale({\n    domain: padExtent(\n      domainY === 'auto'\n        ? extent(data.reduce((a, c) => a.concat(dataAccessor(c)),[]), yAccessor)\n        : domainY,\n      0.05\n    )\n  })\n\n  return (\n    <Chart\n      height={height}\n      width={width}\n      marginLeft={50}\n      marginRight={30}\n      marginTop={50}\n      className={className}\n    >\n      <Text className=\"title\" x={10} y={-10}>{title}</Text>\n      <AxisBottom\n        scale={scaleX}\n        gridlines\n      />\n      <AxisLeft\n        scale={scaleY}\n        gridlines\n      />\n      <Line\n        x={d => scaleX(xAccessor(d))}\n        y={d => scaleY(yAccessor(d))}\n        accessor={dataAccessor}\n        data={data}\n        animate\n      />\n    </Chart>\n  );\n}\n\nexport { LineChart };\n","import { useEffect } from 'react';\nimport { scaleTime, scaleLinear, scaleOrdinal } from 'd3-scale';\nimport { hash } from '../lib'\n\nconst useTimeScale = ({domain}) => {\n  const scale = scaleTime()\n    .domain(domain)\n\n  useEffect(() => {\n    scale\n      .domain(domain)\n  }, [ ...domain ]);\n\n  return scale;\n}\n\nconst useLinearScale = ({domain}) => {\n  const scale = scaleLinear()\n    .domain(domain)\n\n  useEffect(() => {\n    scale\n      .domain(domain)\n  }, [ ...domain ]);\n\n  return scale;\n}\n\nconst useOrdinalScale = ({domain = [], range = []}) => {\n  const scale = scaleOrdinal()\n  if (domain.length) scale.domain(domain)\n  if (range.length) scale.range(range)\n\n  useEffect(() => {\n    if (domain.length) scale.domain(domain)\n    if (range.length) scale.range(range)\n  }, [ hash(domain), hash(range) ])\n\n  return scale\n}\n\nexport {\n  useTimeScale,\n  useLinearScale,\n  useOrdinalScale\n}\n","import React from 'react'\nimport { schemeSet2 } from 'd3-scale-chromatic'\nimport styled from 'styled-components'\n\nimport { useWeightData } from '../../lib'\nimport { LineChart } from '../common'\nimport { useWindowDimensions, useOrdinalScale } from '../../hooks'\n\nimport './Home.css'\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`\n\nconst formatDataForGraph = (d, lineColors) => {\n  \n  const {\n    initialReading = +d.data[0].weight,\n    data,\n    id\n  } = d;\n\n  return {\n    ...d,\n    key: id,\n    active: d.active !== undefined ? d.active : false,\n    data: data.map(e => ({\n      ...e,\n      weight: +e.weight,\n      relative: +e.weight - initialReading,\n      datetime: Date.parse(e.datetime)\n    })),\n    color: lineColors(id) \n  }\n}\n\nconst Home = () => {\n\n  const [ width ] = useWindowDimensions();\n\n  const lineColors = useOrdinalScale({ range: schemeSet2 })\n\n  const graphData = useWeightData({includeHistory: true})\n    .map(d => formatDataForGraph(d, lineColors))\n  graphData.sort((a,b) => b.active - a.active)\n\n  return (\n    <Container>\n      <LineChart\n        data={graphData.filter(d => d.active)}\n        width={width}\n        height={500}\n        yAccessor={d => d.relative}\n        xAccessor={d => d.datetime}\n        title=\"Everyone, Relative loss to first reading\"\n        className=\"chart chart-full\"\n      />\n      {graphData.map(d => (\n        <LineChart\n          key={d.id}\n          data={[d]}\n          width={width/(width > 1200 ? 2: 1)}\n          height={500}\n          yAccessor={d => d.weight}\n          xAccessor={d => d.datetime}\n          title={d.name}\n          className=\"chart chart-half\"\n        />\n      ))}\n      <LineChart\n        title=\"Inactive relative loss\"\n        data={graphData.filter(d => !d.active)}\n        width={width}\n        height={500}\n        yAccessor={d => d.relative}\n        xAccessor={d => d.datetime}\n        className=\"chart chart-full\"\n      />\n    </Container>\n  )\n}\n\nexport default Home;\n","import { useState, useEffect } from 'react';\nimport debounce from 'debounce'\n\nconst useWindowDimensions = () => {\n  const [dimensions, setDimensions] = useState([ window.innerWidth, window.innerHeight]);\n\n  useEffect(() => {\n    window.addEventListener('resize', debounce(() => {\n      setDimensions([document.body.clientWidth, document.body.clientHeight]);\n    }, 500));\n  }, [])\n\n  return dimensions;\n}\n\nexport { useWindowDimensions };\n","import { useState, useEffect } from 'react';\nimport { config } from '../config';\n\nconst useWeightData = ({includeHistory = true}) => {\n  \n  const [ data, setData ] = useState([]);\n\n  useEffect(() => {\n    const url = new URL('users', config.endpoint);\n    if (includeHistory) url.searchParams.append('includeHistory', includeHistory);\n    fetch(\n      url,\n      {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        mode: 'cors'\n      }\n    )\n      .then(res => res.json())\n      .then(res => setData(Object.values(res.payload)));\n  }, [includeHistory]);\n\n  return data;\n}\n\nexport { useWeightData }\n","import React from 'react';\n\nimport { Home } from './pages';\n\nconst App = () => (\n  <Home />\n)\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}