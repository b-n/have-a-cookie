(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(22),c=n.n(i),o=(n(61),n(16)),u=n(20),l=n(48),s=n(54),d=n(51),m={endpoint:"https://mvpreedxy0.execute-api.eu-central-1.amazonaws.com/dev/"},f=function(e){return e.reduce(function(e,t){return e+t},"")},h=n(8),g=n(17),v=n(39),p=n(6),b=(n(128),function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),r=n[0],i=n[1];return a.useEffect.apply(void 0,[function(){i(e)}].concat(Object(g.a)(e))),r}),E=function(e){var t=e.axisFn,n=e.scale,r=(e.range,e.ticks),i=e.tickFormat,c=Object(a.useRef)(null);return Object(a.useEffect)(function(){var e=t().scale(n);r&&e.ticks(r),i&&e.tickFormat(i),Object(p.c)(c.current).call(e)},[].concat(Object(g.a)(n.domain()),Object(g.a)(n.range()))),c},w=function(e){var t=e.chart,n=e.scale,a=e.gridlines,i=e.className,c=e.ticks,o=e.tickFormat,u=b([0,t.plotHeight]);n.range([0,t.plotWidth]);var l=E({axisFn:v.a,scale:n,ticks:c,tickFormat:o});return r.a.createElement(h.Group,{transform:{translate:u},className:i},a&&n.ticks().map(function(e){return r.a.createElement(h.Line,{key:e,x1:n(e)+.5,x2:n(e)+.5,y1:-t.plotHeight,y2:0,className:"gridline"})}),r.a.createElement("g",{ref:l}))},y=function(e){var t=e.chart,n=e.scale,a=e.gridlines,i=e.className,c=e.ticks,o=e.tickFormat,u=b([0,0]);n.range([t.plotHeight,0]);var l=E({axisFn:v.b,scale:n,ticks:c,tickFormat:o});return r.a.createElement(h.Group,{transform:{translate:u},className:i},a&&n.ticks().map(function(e){return r.a.createElement(h.Line,{key:e,x1:0,x2:t.plotWidth,y1:n(e)+.5,y2:n(e)+.5,className:"gridline"})}),r.a.createElement("g",{ref:l}))},j=n(49),O=n(12),k=function(e){var t=e.x,n=e.y,a=e.data,i=e.chart,c=e.accessor,o=void 0===c?function(e){return e.data}:c,l=e.animate,s=void 0!==l&&l,d=Object(O.line)().x(t).y(n).curve(O.curveBundle.beta(.75)),m="url(#".concat(i.clipPathId,")"),f=a.map(function(e){return{key:e.key,plot:r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{d:d(o(e)),clipPath:m,className:"line",stroke:e.color||"black"}),o(e).map(function(a,i){return r.a.createElement(h.Circle,{key:i,cx:t(a),cy:n(a),clipPath:m,fill:e.color,className:"point"})})),animationProgress:1}});return r.a.createElement(j.Collection,{data:f,nodeEnter:function(e){return Object(u.a)({},e,{animationProgress:0})},animate:s},function(e){return e.map(function(e){var t=e.key,n=e.plot,a=e.animationProgress;return r.a.createElement(h.Group,{key:t,transform:{translate:[0,i.plotHeight*(1-a)]}},n)})})},x=function(e){var t=e.height,n=e.width,a=e.marginTop,i=void 0===a?20:a,c=e.marginRight,o=void 0===c?20:c,u=e.marginBottom,l=void 0===u?20:u,s=e.marginLeft,d=void 0===s?20:s,m=e.children,f=e.className,g={height:t,width:n,marginTop:i,marginRight:o,marginBottom:l,marginLeft:d,plotHeight:t-i-l,plotWidth:n-d-o,clipPathId:"plotArea"};return r.a.createElement(h.Svg,{height:t,width:n,className:f},r.a.createElement(h.Group,{transform:{translate:[d,i]}},r.a.createElement("clipPath",{id:g.clipPathId},r.a.createElement(h.Rect,{width:g.plotWidth,height:g.plotHeight})),r.a.Children.map(m,function(e){return r.a.cloneElement(e,{chart:g})})))},N=n(24),H=n(50),A=n.n(H),F=n(2),P=function(e,t){var n=e[1]-e[0];return[e[0]-n*t,e[1]+n*t]},R=function(e){var t=e.height,n=e.width,i=e.data,c=e.title,o=void 0===c?"":c,u=e.dataAccessor,l=void 0===u?function(e){return e.data}:u,s=e.yAccessor,d=void 0===s?function(e){return e}:s,m=e.xAccessor,f=void 0===m?function(e){return e}:m,v=e.domainY,p=void 0===v?"auto":v,b=e.domainX,E=void 0===b?"auto":b,j=(e.children,e.className),O=function(e){var t=e.domain,n=Object(N.c)().domain(t);return Object(a.useEffect)(function(){n.domain(t)},Object(g.a)(t)),n}({domain:"auto"===E?Object(F.extent)(i.reduce(function(e,t){return e.concat(l(t))},[]),f):E}),H=function(e){var t=e.domain,n=Object(N.a)().domain(t);return Object(a.useEffect)(function(){n.domain(t)},Object(g.a)(t)),n}({domain:P("auto"===p?Object(F.extent)(i.reduce(function(e,t){return e.concat(l(t))},[]),d):p,.05)});return r.a.createElement(x,{height:t,width:n,marginLeft:50,marginRight:30,marginTop:50,className:j},r.a.createElement(h.Text,{className:"title",x:10,y:-10},o),r.a.createElement(w,{scale:O,gridlines:!0}),r.a.createElement(y,{scale:H,gridlines:!0}),r.a.createElement(k,{x:function(e){return O(f(e))},y:function(e){return H(d(e))},accessor:l,data:i,animate:!0}))};n(126);function W(){var e=Object(l.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]);return W=function(){return e},e}var L=d.a.div(W()),T=function(){var e=function(){var e=Object(a.useState)([window.innerWidth,window.innerHeight]),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){window.addEventListener("resize",A()(function(){r([document.body.clientWidth,document.body.clientHeight])},500))},[]),n}(),t=Object(o.a)(e,1)[0],n=function(e){var t=e.domain,n=void 0===t?[]:t,r=e.range,i=void 0===r?[]:r,c=Object(N.b)();return n.length&&c.domain(n),i.length&&c.range(i),Object(a.useEffect)(function(){n.length&&c.domain(n),i.length&&c.range(i)},[f(n),f(i)]),c}({range:s.a}),i=function(e){var t=e.includeHistory,n=void 0===t||t,r=Object(a.useState)([]),i=Object(o.a)(r,2),c=i[0],u=i[1];return Object(a.useEffect)(function(){var e=new URL("users",m.endpoint);n&&e.searchParams.append("includeHistory",n),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(e){return e.json()}).then(function(e){return u(Object.values(e.payload))})},[n]),c}({includeHistory:!0}).map(function(e){return function(e,t){var n=e.initialReading,a=void 0===n?+e.data[0].weight:n,r=e.data,i=e.id;return Object(u.a)({},e,{key:i,data:r.map(function(e){return Object(u.a)({},e,{weight:+e.weight,relative:+e.weight-a,datetime:Date.parse(e.datetime)})}),color:t(i)})}(e,n)});return r.a.createElement(L,null,r.a.createElement(R,{data:i.filter(function(e){return e.active}),width:t,height:500,yAccessor:function(e){return e.relative},xAccessor:function(e){return e.datetime},title:"Everyone, Relative loss to first reading",className:"chart chart-full"}),i.map(function(e){return r.a.createElement(R,{key:e.id,data:[e],width:t/(t>1200?2:1),height:500,yAccessor:function(e){return e.weight},xAccessor:function(e){return e.datetime},title:e.name,className:"chart chart-half"})}),r.a.createElement(R,{title:"Inactive relative loss",data:i.filter(function(e){return!e.active}),width:t,height:500,yAccessor:function(e){return e.relative},xAccessor:function(e){return e.datetime},className:"chart chart-full"}))},B=function(){return r.a.createElement(T,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},56:function(e,t,n){e.exports=n(130)}},[[56,1,2]]]);
//# sourceMappingURL=main.5a5219e7.chunk.js.map